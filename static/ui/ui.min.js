

ui = {}





ui.date = { Week : ['日', '一', '二', '三', '四', '五', '六'] };

ui.date.format = function(v,formatter) {

	if(! (v instanceof Date)) {
		v = new Date(v * 1000);
	}

	var str = formatter;
   
    str = str.replace(/yyyy|YYYY/, v.getFullYear());
    str = str.replace(/yy|YY/, (v.getYear() % 100) > 9 ? (v.getYear() % 100).toString() : '0' + (v.getYear() % 100));

    str = str.replace(/MM/, v.getMonth() > 9 ? (v.getMonth() + 1).toString() : '0' + (v.getMonth() + 1));
    str = str.replace(/M/g, v.getMonth());

    str = str.replace(/w|W/g, ui.date.Week[v.getDay()]);

    str = str.replace(/dd|DD/, v.getDate() > 9 ? v.getDate().toString() : '0' + v.getDate());
    str = str.replace(/d|D/g, v.getDate());

    str = str.replace(/hh|HH/, v.getHours() > 9 ? v.getHours().toString() : '0' + v.getHours());
    str = str.replace(/h|H/g, v.getHours());
    str = str.replace(/mm/, v.getMinutes() > 9 ? v.getMinutes().toString() : '0' + v.getMinutes());
    str = str.replace(/m/g, v.getMinutes());

    str = str.replace(/ss|SS/, v.getSeconds() > 9 ? v.getSeconds().toString() : '0' + v.getSeconds());
    str = str.replace(/s|S/g, v.getSeconds());

    return str;
};




(function(ui){
	
	ui.url = {
			
		url : function(uri) {
			
			var url = window.location.href;
			
			var i = url.indexOf("://");
			
			if(i >=0) {
				
				var ii = url.indexOf("/",i + 3);
				
				if(ii >=0){
					return url.substr(0,ii) + uri;
				}
				
				return url + uri;
			}
			
			return uri;
		} ,
		
		query : function(url) {
			
			if(url === undefined){
				url = window.location.href;
			}
			
			var i = url.indexOf("?");
			
			if(i >=0) {
				var v = url.substr(i + 1);
				i = v.indexOf("#");
				if(i >= 0) {
					return v.substr(0,i);
				}
				return v;
			}
			
			return "";
		} ,
		
		queryValue : function(key,url) {
			
			if(url === undefined){
				url = window.location.href;
			}
			
			var query = ui.url.query(url);
			
			var k = key + "=";
			
			var i = query.indexOf(k);
			
			if(i >=0) {
				
				var ei = query.indexOf("&",i + k.length);
				
				if(ei >= 0){
					return decodeURIComponent(query.substr(i + k.length, ei - i - k.length));
				}
				else {
					return decodeURIComponent(query.substr(i + k.length));
				}
			}
		
		} ,
		
		queryObject : function(url) {
			var object = {};
			var query = ui.url.query(url);
			if(query) {
				var items = query.split("&");
				for(var i in items) {
					var item = items[i];
					var vs = item.split("=");
					object[vs[0]] = vs.length > 1 ? decodeURIComponent(vs[1]) : "";
				}
			}
 			return object;
		} ,
		
		queryString : function(object) {
			
			var v = [];
			
			for(var key in object) {
				
				var vv = object[key];
				
				if(vv) {
					v.push(key + "=" + encodeURIComponent(vv));
				}
				
				
			}
			
			return v.join('&');
			
		}
			
	};
	
	
})(ui);


